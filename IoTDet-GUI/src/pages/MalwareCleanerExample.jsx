import {Grid} from "@mui/material";

const MalwareCleanerExample = () => {
    return (
        <Grid container sx={{ml: '1%'}}>
            <Grid item xs={12}>
                <pre>
                    <code style={{color: 'white', tabSize: 4}}>

                        # Code example written in Python<br/><br/>

                        import os<br/>
                        import signal<br/>
                        import time<br/>
                        import requests<br/><br/>

                        def get_mac_address(): # Function that shall return the mac address of the device in the format 'XX:XX:XX:XX'<br/>
                        &emsp;&emsp;...<br/>
                        &emsp;&emsp;return mac_address<br/><br/>

                        MAC = get_mac_address()<br/>
                        server='https://iotdet.eu.loclx.io'<br/><br/>

                        while True<br/><br/>
                        &emsp;&emsp;response = requests.get(f"&#123;server&#125;/scenario/recording/device/malware/time/finished/check?mac_address=&#123;MAC&#125;")<br/>
                        &emsp;&emsp;if response.status_code == 200 and response.json():<br/>
                        &emsp;&emsp;&emsp;&emsp;while True:<br/><br/>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;os.kill(int(sys.argv[1]), signal.SIGKILL)<br/> # KILL THE MALWARE PROCESS BY PID. DEPLOYFILE MALWARE SETS THE PID IN ARGUMENT WHEN RUN MALWARE_CLEANER
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;response2 = requests.get( f"&#123;server&#125;/scenario/recording/device/malware/finish?mac_address=&#123;MAC&#125;")<br/><br/>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;if response2.status_code == 204 or response2.status_code == 404:<br/>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;sys.exit()<br/>
                        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;time.sleep(2)<br/><br/>



                        &emsp;&emsp;elif response.status_code == 404:<br/>
                        &emsp;&emsp;&emsp;&emsp;sys.exit()<br/>
                        &emsp;&emsp;time.sleep(5)<br/>


                    </code>
                </pre>
            </Grid>
        </Grid>

    )
}

export default MalwareCleanerExample